
<img src="https://i.imgur.com/tZybQsU.gif"/>

# Pywalfox

Pywalfox is an application used to theme Firefox using your pywal colors.
- Customizable colors
- Uses the Firefox Theme API
- Automatic theming for DuckDuckGo with your pywal colors (Optional) 
- Custom CSS with bold text, styled dropdowns, etc. (Optional) 
- Updating the browser theme to match your pywal colors using the addon and/or your terminal 

You can download the Firefox Addon here: https://addons.mozilla.org/en-US/firefox/addon/pywalfox/

### Warning
To use this addon, you must install a script on your computer. The script will be ran by Firefox upon launch and will handle fetching your pywal colors. Pywalfox supports only Linux.

### Installation
1. `git clone git@github.com:Frewacom/Pywalfox.git`
2. `cd Pywalfox/native-app`
3. `bash setup.sh`

The setup script will require sudo access, since the path in which we need to place the native messaging manifest is protected by default. Firefox requires the manifest to allow communication between the addon and the script running on your computer.

If the setup is successfull, it should look something like this:
```
Creating 'native-messaging-hosts' folder in ~/.mozilla
Setting path to pywal-fetcher.py in the native app manifest
Copying native application manifest to ~/.mozilla/native-messaging-hosts/pywalfox.json
Setting execution permissions on daemon (pywal-fetcher.py)
Finished.
```

### Updating the theme using the terminal
If you are using some script for theming your system and do not want to manually refetch your pywal colors using the settings page, you can trigger an update of the browser theme by running `./pywal-fetcher.py update` in your terminal (the script is not in your `PATH` by default).

### Custom CSS
If you want to use the custom CSS, you must do the following:
1. Navigate to `about:config` in Firefox
2. Set `toolkit.legacyUserProfileCustomizations.stylesheets` to `true`

### Troubleshooting
* Make sure that `path` in `~/.mozilla/native-messaging-hosts/pywalfox.json` points to the location of `native-app/pywal-fetcher.py`
* Make sure that `pywal-fetcher.py` is executable (`chmod +x pywal-fetcher.py`)
* Make sure that the file `~/.cache/wal/colors` exists and contains the colors generated by pywal
* Take a look at the Browser console (`Tools > Web developer > Browser console`) for errors

#### Errors in browser console
- `ExtensionError: No such native application pywalfox` 

   The manifest is not installed properly. Follow the instructions here: https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_manifests. The manifest is located at `native-app/assets/pywalfox-manifest.json`. 

- `Unchecked lastError value: Error: Could not establish connection. Receiving end does not exist.` 
   
   The path to the script in the manifest is (most likely) invalid. 
   
If you encounter any other errors: https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging#Troubleshooting
   

### Roadmap
Feel free to create issues/pull requests for features you want to be added. You can see what is currently planned/being worked on here: https://github.com/Frewacom/Pywalfox/projects/1
